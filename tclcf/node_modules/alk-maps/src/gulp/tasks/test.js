var config = require('../gulp-config')
var gulp = require('gulp')

function test() {
    var mocha = require('gulp-spawn-mocha')
    return gulp.src(config.paths.test.all)
        .pipe(mocha(config.mocha))
}
gulp.task('watch-test', ['test-no-err'], function() {
    gulp.watch(config.paths.src.all, ['test-no-err'])
    gulp.watch(config.paths.test.all, ['test-no-err'])
})
gulp.task('test', function() {
    return test()
})
gulp.task('test-no-err', function() {
    test().on('error', function() {
        this.emit('end')
    })
})
