var helpers = require('../helpers')

module.exports = function(ALKMaps, map, layer, clusterStrategy, options) {
    var api = {
        layer: layer,
        clusterStrategy: clusterStrategy,
        options: options,
        eventsEnabled: false,

        destroy: function() {
            this.removeLayer()
            layer.destroy()
        },

        addItem: function() {
        },

        doneAddingItems: function() {
        },

        clearItems: function() {
        },

        removeLayer: function() {
            this.clearItems()
            map.removeLayer(layer)
        },

        setVisibility: function(visible) {
            if (!visible) {
                visible = !layer.getVisibility()
            }
            layer.setVisibility(visible)
            layer.redraw()
        },

        createLonLat: function(lon, lat) {
            return helpers.createLonLat(lon, lat, map, ALKMaps)
        }
    }

    layer.api = api
    return api
}
