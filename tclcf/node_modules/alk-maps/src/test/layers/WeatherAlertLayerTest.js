describe('WeatherAlertLayer', function() {
    var WeatherAlertLayer
    var ALKMaps
    var LayerApi
    var map

    beforeEach(function() {
        ALKMaps = new MockALKMaps()
        map = new MockMap()
        LayerApi = new MockLayerApi()

        WeatherAlertLayer = proxyquire('../main/layers/WeatherAlertLayer', {
            './LayerApi': LayerApi.constructor
        })
    })

    it('should create a weather layer', function() {
        var layer = { abc: 123 }
        ALKMaps.Layer.WeatherAlerts.returns(layer)

        var WeatherAlertLayerApi = new WeatherAlertLayer(ALKMaps, map, {})

        WeatherAlertLayerApi.should.equal(LayerApi.api)
        map.addLayer.should.have.been.calledWith(layer)
        ALKMaps.Layer.WeatherAlerts.should.have.been.calledWith('Weather Alert Layer', { })
    })

    it('should support options', function() {
        var layer = { abc: 123 }
        ALKMaps.Layer.WeatherAlerts.returns(layer)
        var options = {
            layerName: 'namey'
        }

        var WeatherAlertLayerApi = new WeatherAlertLayer(ALKMaps, map, options)

        WeatherAlertLayerApi.should.equal(LayerApi.api)
        map.addLayer.should.have.been.calledWith(layer)
        ALKMaps.Layer.WeatherAlerts.should.have.been.calledWith(options.layerName, { })
    })
})
