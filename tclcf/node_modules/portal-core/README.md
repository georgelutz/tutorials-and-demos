portal-core
-----------
Shared components and build system used by the various PeopleNet portals.

# Using portal-core via npm

    npm install git+ssh://git@github.com:PeopleNet/portal-core

# Developing for portal-core

Install and build
--------------------
```
npm install
npm run build
```

Install gulp globally for advanced cli
------------------------------------
```
npm install -g gulp
// tasks 
gulp clean - clean project dist folders
gulp lint - lint project for style/errors
gulp test - run the tests in the project
gulp prebuild - run lint/tests before commit
gulp build - build the project
gulp watch - watch for changes and continuously build
gulp watch-test - watch for changes and continuously test
```
    
### Module structure

Modules are built using Browserify and PostCSS. A main app.js is used to link commonJS 
modules together as angularJS objects. See [coreApp.js](./blob/master/src/main/core/coreApp.js) for a good sample.
Don't forget to update the portal-core gulp-config.js when adding a new module.

```
.
+-- src
|   +-- gulp
|   |   +-- shared : tasks shared from portal-core to other portals
|   |   +-- tasks  : tasks used for portal-core only
|   |   +-- gulp-config.js : configuration used for building portal-core
|   +-- main
|   |   +-- moduleName : folder with a camelCase name for your module
|   |   |   +-- config      : angular config objects
|   |   |   +-- constants   : angular constant objects
|   |   |   +-- controllers : angular controller objects
|   |   |   +-- directives  : angular directive objects
|   |   |   +-- factories   : angular factory objects
|   |   |   +-- filters     : angular filter objects
|   |   |   +-- images      : images used in this module
|   |   |   +-- providers   : angular provider objects
|   |   |   +-- run         : angular run functions
|   |   |   +-- services    : angular service objects
|   |   |   +-- styles      : css styles in this module
|   |   |   +-- views       : html views in this module
|   |   |   +-- moduleNameApp.js : the angular app.js linking your module together
|   |   |   +-- gulp-config.json : (optional) used to define external js/css dependencies
```

Git Ignore
----------
Our .gitignore file is set up to ignore files and folders produced by the project itself.

Please [globally ignore](https://help.github.com/articles/ignoring-files/#create-a-global-gitignore) files that your development machine and/or IDE produce unrelated to the project itself.

If necessary, you can ignore them [for this project only](https://help.github.com/articles/ignoring-files/#explicit-repository-excludes).
    
Live Testing 
------------
```
//This is a two step process
//Step 1, from within portal-core/, while you are running `gulp watch`
npm link

//Step 2, from within your target link project
npm link portal-core

//Step 3, to unlink and go back to normal, from within target project
npm unlink portal-core
```

Tools and links
---------------
* Libraries:
  * [Angular 1.x](https://github.com/angular/angular.js) (single page app framework)
  * [Angular Material](https://material.angularjs.org/latest) (UI component framework)
  * [Restangular](https://github.com/mgonto/restangular) (simple REST calls)
* Build:
  * [Gulp](http://gulpjs.com) (build automation)
  * [Babel](https://babeljs.io/docs/learn-es2015/) (ES6 / ES2015 transpile)
  * [Browserify](http://browserify.org) (bundle js for the browser)
  * [PostCSS](https://github.com/postcss/postcss) (css tooling)
  * [PreCSS](https://github.com/jonathantneal/precss) (css preprocessor like sass)
* Linting:
  * [ESLint](http://eslint.org) (code quality)
  * [StyleLint](https://github.com/stylelint/stylelint) (css code quality)
* Testing:
  * [Mocha](http://mochajs.org) (test runner)
  * [Chai](http://chaijs.com) (test assertions)
  * [Sinon](http://sinonjs.org) (function mocking/stubbing)
  * [Sinon-Chai](https://github.com/domenic/sinon-chai) (chai asserts for mocks/stubs)
  * [Sinon-as-promised](https://github.com/bendrucker/sinon-as-promised) (sinon syntax sugar for promises)
  * [Chai-as-promised](http://chaijs.com/plugins/chai-as-promised) (chai syntax sugar for promises)
  * [Proxyquire](https://github.com/thlorenz/proxyquire) (mocking require statements)
