const _ = require('lodash')

module.exports = {
    bindings: {
        section: '<'
    },
    template: require('../views/menuLink.html'),
    controller: class MenuLink {
        /* @ngInject */
        constructor($analytics, $state, navigation) {
            this.$analytics = $analytics
            this.$state = $state
            this.navigation = navigation
        }

        isSvg() {
            return _.endsWith(_.get(this.section, 'icon'), '.svg')
        }

        isSelected() {
            return _.some(this.section.activeStates, state => {
                return _.includes(this.$state.current.name, state)
            })
        }

        reportLeftNavClick(section) {
            this.$analytics.eventTrack('Left Menu Link Clicked', {category: 'Navigation Tracking', label: section.url})
        }
    }
}
