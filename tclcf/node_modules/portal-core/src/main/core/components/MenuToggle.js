var _ = require('lodash')

module.exports = {
    bindings: {
        section: '<'
    },
    template: require('../views/menuToggle.html'),
    controller: class MenuToggle {
        /* @ngInject */
        constructor($timeout, navigation) {
            this.$timeout = $timeout
            this.navigation = navigation
        }

        isSvg() {
            return _.endsWith(_.get(this.section, 'icon'), '.svg')
        }

        isSelected() {
            return this.section.selected
        }

        isVisible(page) {
            return this.navigation.isVisible(page)
        }

        toggle() {
            this.navigation.toggleSelectSection(this.section)
        }

        getHeight() {
            if (this.section.selected) {
                let visibleCount = _.reduce(this.section.pages, (count, value) => count + !!value.visible, 0)
                return 51 * visibleCount
            } else {
                return 0
            }
        }
    }
}
