require('../styles/releaseNotes.scss')

module.exports = {
    template: require('../views/releaseNotes.html'),
    controller: class ReleaseNotes {
        /* @ngInject */
        constructor($log, $showdown, staticContentService) {
            this.$log = $log
            this.$showdown = $showdown
            this.staticContentService = staticContentService
        }

        $onInit() {
            return this.staticContentService.getContent('RELEASE_NOTES.md')
                .then(markdown => {
                    this.content = this.$showdown.makeHtml(markdown)
                })
                .catch(err => {
                    this.$log.info('No RELEASE_NOTES.md found!', err)
                    this.content = 'No release notes found. Please create a RELEASE_NOTES.md file for this portal.'
                })
        }
    }
}
