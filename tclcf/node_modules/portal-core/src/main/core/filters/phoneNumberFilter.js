var _ = require('lodash')

/**
 * If given a string, either returns a formatted phone number or its input
 * (if invalid). Otherwise returns an empty string.
 */
module.exports = function() {
    return function(phoneNumber) {
        if (_.isString(phoneNumber)) {
            var value = phoneNumber.replace(/[^\d]/g, '')

            if (!value.match(/^\d{10}$/)) {
                return phoneNumber
            }

            var city = value.slice(0, 3)
            var number = value.slice(3)

            number = `${number.slice(0, 3)}-${number.slice(3)}`
            return `(${city}) ${number}`
        }

        return ''
    }
}
