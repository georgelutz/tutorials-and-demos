module.exports = class StaticContentService {
    /* @ngInject */
    constructor($http, portalSha) {
        this.$http = $http
        this.portalSha = portalSha
    }

    getContent(name) {
        var fixed = name
        if (this.portalSha) {
            var rex = new RegExp(`${this.portalSha}\\.[^.]+`)
            if (!rex.test(fixed)) {
                fixed = name.replace(/(.+\.)(.+)/, `$1${this.portalSha}.$2`)
            }
        }

        return this.$http.get(`/${fixed}`, {cache: true})
            .then(data => data.data)
    }
}
