<page-header
        title="{{'permission.permissionEdit.' + ($ctrl.perm.adding ? 'add' : 'edit') | translate}}"
        back-button-handler="'nav.permission.list'">
</page-header>

<standard-card>
    <form id="permission-edit-form" name="$ctrl.form" layout="column" ng-submit="$ctrl.form.$valid && $ctrl.save()">

        <!-- name -->
        <md-input-container>
            <label translate="permission.common.name"></label>
            <input type="text"
                   ng-model="$ctrl.perm.name"
                   pattern="^ROLE_[-A-Z_\d]+$"
                   name="name"
                   required
                   auto-focus/>
            <ng-messages for="$ctrl.form.name.$error" md-auto-hide="false" ng-if="$ctrl.form.name.$touched">
                <ng-message when="required" ng-bind="'permission.permissionEdit.name_required' | translate"></ng-message>
                <ng-message when="pattern" ng-bind="'permission.permissionEdit.name_pattern' | translate"></ng-message>
            </ng-messages>
        </md-input-container>

        <!-- description -->
        <md-input-container>
            <label translate="permission.common.description"></label>
            <input type="text"
                   ng-model="$ctrl.perm.description"
                   ng-minlength=3
                   ng-maxlength=100
                   name="description" required/>
            <ng-messages for="$ctrl.form.description.$error" md-auto-hide="false" ng-if="$ctrl.form.description.$touched">
                <ng-message when="required" ng-bind="'permission.permissionEdit.description_required' | translate"></ng-message>
                <ng-message when="minlength" ng-bind="'permission.permissionEdit.description_min' | translate"></ng-message>
                <ng-message when="maxlength" ng-bind="'permission.permissionEdit.description_max' | translate"></ng-message>
            </ng-messages>
        </md-input-container>

        <!-- Delete, Cancel, Save -->
        <div layout-align="end center" layout="row">
            <md-button
                    type="button"
                    class="md-raised md-warn"
                    ng-hide="$ctrl.perm.adding"
                    ng-click="$ctrl.confirmDelete($event)">
                {{'core.common.form.delete' | translate}}
            </md-button>

            <div flex></div>

            <md-button
                    class="md-cancel"
                    type="button"
                    ng-href="#/nav/permission/list/">
                {{'core.common.form.cancel' | translate}}
            </md-button>
            <md-button
                    md-primary
                    type="submit">
                {{'core.common.form.save' | translate}}
            </md-button>
        </div>
    </form>
</standard-card>
