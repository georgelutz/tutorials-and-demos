<standard-card id="user-detail-container">
    <div layout="row">
        <!-- user name -->
        <h2 class="card-header">{{$ctrl.user.lastName}}, {{$ctrl.user.firstName}}</h2>

        <span flex></span>
        <md-button
                ng-if="$ctrl.canEditUser"
                ng-href="/#/nav/user/edit/{{$ctrl.user.key}}"
                class="md-icon-button no-top-padding">
            <md-icon>edit</md-icon>
        </md-button>
    </div>

    <md-divider class="extend-margins"></md-divider>

    <md-subheader class="md-no-sticky">
        {{'userNew.userProfile.account' | translate}}
    </md-subheader>

    <md-subheader class="md-no-sticky">
        {{'userNew.userProfile.active_status' | translate}}
    </md-subheader>
    <span translate="{{$ctrl.user.status ? 'userNew.common.active' : 'userNew.common.inactive' }}"></span>

    <div layout="row">
        <div layout="column">
            <!-- User Name -->
            <md-subheader class="md-no-sticky">
                {{'userNew.common.username' | translate }} / {{'userNew.common.email' | translate }}
            </md-subheader>

            <div class="break-word">
                {{$ctrl.user.userName}}
            </div>
        </div>
        <span flex="10"></span>
        <div layout="column">
            <md-subheader>{{'userNew.userProfile.email_status' | translate }}</md-subheader>
            <div> {{ ($ctrl.user.userEmails[0]['verified'] ? 'userNew.common.email_verified' :
                'userNew.common.email_not_verified') | translate}}
            </div>
        </div>

        <span flex="10"></span>
        <div layout="column">
            <!-- contact -->
            <md-subheader class="md-no-sticky">
                {{'userNew.common.phone' | translate }}
            </md-subheader>
            <div ng-repeat="phone in $ctrl.user.userPhones">
                {{phone.type | startCase}}
                &nbsp;
                {{phone.phone | phoneNumber}}
            </div>
            <div>
                {{$ctrl.user.emailAddresses[0].address}} ext. {{$ctrl.user.userPhones[0]['extension']}}
            </div>
        </div>
    </div>

    <md-subheader class="md-no-sticky">
        {{'userNew.common.organizations' | translate}}
    </md-subheader>

    <md-table-container>
        <table md-table>
            <thead md-head>
            <tr md-row>
                <th md-column>{{'userNew.userProfile.org_name' | translate }}</th>
                <th md-column>{{'userNew.userProfile.user_roles' | translate}}</th>
                <th md-column>{{'userNew.common.permissions' | translate}}</th>
            </tr>
            </thead>
            <tbody md-body>
            <tr md-row ng-repeat="organization in $ctrl.user.userOrganizations">
                <td md-cell>{{organization.organizationId}}</td>
                <td md-cell>
                    <div ng-repeat="role in organization.roles" ng-class="{'item-padding': !$last }">
                        <span>{{role.roleName}}</span>
                    </div>
                </td>
                <td md-cell>
                    <div ng-repeat="permission in organization.permissions" ng-class="{'item-padding': !$last }">
                        <span>{{permission.permissionName}}</span>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </md-table-container>
</standard-card>
