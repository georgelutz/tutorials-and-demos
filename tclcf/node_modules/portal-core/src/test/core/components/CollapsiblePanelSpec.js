describe('collapsiblePanel', () => {
    var component
    var ctrl

    beforeEach(() => {
        component = require('../../../main/core/components/CollapsiblePanel')
        ctrl = new component.controller()
    })

    describe('#init', () => {
        it('should configure scope based on panel options with panel open', () => {
            // given panel options with defaultOpen set to true
            ctrl.panelOptions = {
                defaultOpen: true,
                panelTitle: 'panel title'
            }

            // when the controller is initialized
            ctrl.$onInit()

            // then the scope should be configured appropriately
            ctrl.isOpen.should.be.true
            ctrl.panelTitle.should.equal('panel title')
        })

        it('should configure scope based on panel options with panel closed', () => {
            // given panel options with defaultOpen set to false
            ctrl.panelOptions = {
                defaultOpen: false,
                panelTitle: 'panel title'
            }

            // when the controller is initialized
            ctrl.$onInit()

            // then the scope should be configured appropriately
            ctrl.isOpen.should.be.false
            ctrl.panelTitle.should.equal('panel title')
        })
    })

    describe('#toggle', () => {
        it('should toggle the value of isOpen on the scope', () => {
            // given a scope with isOpen set to false
            ctrl.$onInit()

            // before toggling, isOpen should be false
            ctrl.isOpen.should.be.false

            // when toggle is called
            ctrl.toggle()

            // then the value of isOpen should be inverted
            ctrl.isOpen.should.be.true
        })
    })
})
