describe('DisplayUnit', () => {
    let component
    let unitConversionService
    let ctrl

    beforeEach(() => {
        unitConversionService = {}

        component = require('../../../main/core/components/DisplayUnit')
        ctrl = new component.controller(unitConversionService)
    })

    it('should calculate on changes', () => {
        ctrl.calculate = sinon.stub()

        ctrl.$onChanges()

        ctrl.calculate.should.have.been.called
    })

    it('should call search service and convert a unit', () => {
        unitConversionService.convertUnit = sinon.stub().returns({output: 8.04, label: 'Kilometers'})
        ctrl.input = 5
        ctrl.fromUnit = 'mi'
        ctrl.decimals = '2'
        ctrl.label = 'short'
        ctrl.toUnit = 'km'

        ctrl.calculate()

        ctrl.output.should.deep.equal('8.04 Kilometers')
        unitConversionService.convertUnit.should.have.been.calledWith(5, 'mi', '2', 'short', 'km')
    })

})
