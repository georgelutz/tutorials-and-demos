describe('mapThumbnail', () => {
    var component
    var ctrl
    var mapUtilService

    beforeEach(() => {
        mapUtilService = {}
        mapUtilService.getSimpleMapUrl = sinon.stub().returns('mapUrl')
        mapUtilService.showSimpleMapPopup = sinon.stub()

        component = require('../../../main/core/components/MapThumbnail')
        ctrl = new component.controller(mapUtilService)
    })

    it('should init', () => {
        ctrl.location = 'blah'

        ctrl.$onInit()

        ctrl.mapUtilService.getSimpleMapUrl.should.have.been.calledWith('blah')
        ctrl.mapUrl.should.equal('mapUrl')
    })

    it('should call mapUtil', () => {
        ctrl.showMapPopup()

        mapUtilService.showSimpleMapPopup.should.have.been.called
    })

    it('should allow for custom scale', () => {
        ctrl.location = 'blah'
        ctrl.scale = 'scale'

        ctrl.$onInit()

        ctrl.mapUtilService.getSimpleMapUrl.should.have.been.calledWith('blah', 'scale')
    })
})
