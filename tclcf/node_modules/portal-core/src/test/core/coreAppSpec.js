const proxyquire = require('proxyquire').noCallThru()

describe('coreApp', () => {
    var angular

    beforeEach(() => {
        angular = {}
        angular.module = sinon.stub().returnsThis()
        angular.component = sinon.stub().returnsThis()
        angular.config = sinon.stub().returnsThis()
        angular.constant = sinon.stub().returnsThis()
        angular.directive = sinon.stub().returnsThis()
        angular.factory = sinon.stub().returnsThis()
        angular.filter = sinon.stub().returnsThis()
        angular.provider = sinon.stub().returnsThis()
        angular.run = sinon.stub().returnsThis()
        angular.service = sinon.stub().returnsThis()
    })

    it('should load', () => {
        proxyquire('../../main/core/coreApp', {
            angular,
            'angular-material': {},
            'angular-sanitize': {},
            'angular-local-storage': {},
            'angular-ui-router': {},
            'angular-messages': {},
            'angular-translate': {},
            'angular-dynamic-locale': {},
            'angular-translate-loader-static-files': {},
            'angular-translate-handler-log': {},
            'angular-material-data-table': {},
            d3: {},
            restangular: {},
            'ng-showdown': {},
            angulartics: {},
            'angulartics-google-analytics': {},
            'alk-maps': {}
        })

        angular.module.should.have.been.calledWith('portal-core', sinon.match.array)
    })
})
