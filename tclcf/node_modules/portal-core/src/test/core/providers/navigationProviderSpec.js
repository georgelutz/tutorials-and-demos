describe('navigationProvider', () => {
    let navigationProvider

    beforeEach(() => {
        let constructor = require('../../../main/core/providers/navigationProvider')
        navigationProvider = {}
        _.bind(constructor, navigationProvider)()
    })

    it('should support basic ops', () => {
        //should support add
        navigationProvider.addMenuItem('type', 'name', 'icon', 'url', 'sort', 'show', 'active')
        navigationProvider.addMenuItem('0', '1', '2', '3', '4', '5', '6')

        let expected = [
            {
                type: 'type',
                name: 'name',
                icon: 'icon',
                url: 'url',
                sort: 'sort',
                permissions: 'show',
                activeStates: 'active'
            },
            {
                type: '0',
                name: '1',
                icon: '2',
                url: '3',
                sort: '4',
                permissions: '5',
                activeStates: '6'
            }
        ]
        navigationProvider.getMenuItems().should.contain(expected[0]).and.contain(expected[1])
        let navigation = navigationProvider.$get()
        navigation.sections.should.contain(expected[0]).and.contain(expected[1])

        //should support remove
        navigationProvider.removeByName('name').should.deep.equal({
            type: 'type',
            name: 'name',
            icon: 'icon',
            url: 'url',
            sort: 'sort',
            permissions: 'show',
            activeStates: 'active'
        })

        expected = [
            {
                type: '0',
                name: '1',
                icon: '2',
                url: '3',
                sort: '4',
                permissions: '5',
                activeStates: '6'
            }
        ]
        navigationProvider.getMenuItems().should.deep.equal(expected)
        navigation = navigationProvider.$get()
        navigation.sections.should.deep.equal(expected)
    })

    it('should support renames', () => {
        navigationProvider.addMenuItem('0', '1', '2', '3', '4', '5', '6')

        navigationProvider.removeAndRename('1', 'newAndShiny').should.deep.equal({
            activeStates: '6',
            icon: '2',
            name: 'newAndShiny',
            permissions: '5',
            sort: '4',
            type: '0',
            url: '3'
        })
    })
})
