describe('userMenuProvider', function() {
    var userMenuProvider

    beforeEach(function() {
        var constructor = require('../../../main/core/providers/userMenuProvider')
        userMenuProvider = {}
        _.bind(constructor, userMenuProvider)()
    })


    it('should support basic ops', function() {
        //should support add
        userMenuProvider.addMenuItem('title', 'icon', 'href', 'sort', 'show', 'active')
        userMenuProvider.addMenuItem('1', '2', '3', '4', '5', '6')

        var expected = [
            {
                title: 'title',
                icon: 'icon',
                href: 'href',
                sort: 'sort',
                showExpr: 'show',
                activeExpr: 'active'
            },
            {
                title: '1',
                icon: '2',
                href: '3',
                sort: '4',
                showExpr: '5',
                activeExpr: '6'
            }
        ]
        userMenuProvider.getMenuItems().should.contain(expected[0]).and.contain(expected[1])
        var userMenu = userMenuProvider.$get()
        userMenu.should.contain(expected[0]).and.contain(expected[1])

        //should support remove
        userMenuProvider.removeByTitle('title').should.deep.equal({
            title: 'title',
            icon: 'icon',
            href: 'href',
            sort: 'sort',
            showExpr: 'show',
            activeExpr: 'active'
        })

        expected = [
            {
                title: '1',
                icon: '2',
                href: '3',
                sort: '4',
                showExpr: '5',
                activeExpr: '6'
            }
        ]
        userMenuProvider.getMenuItems().should.deep.equal(expected)
        userMenu = userMenuProvider.$get()
        userMenu.should.deep.equal(expected)
    })
})
