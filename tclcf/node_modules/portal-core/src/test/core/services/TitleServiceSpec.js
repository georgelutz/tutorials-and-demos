let TitleService = require('../../../main/core/services/TitleService')

describe('TitleService', () => {
    var $document
    var $translate
    var indexConfig
    var target
    var title

    beforeEach(() => {
        title = 'beep'
        $translate = sinon.stub().returns({
            then: sinon.stub().callsArgWith(0, title)
        })

        indexConfig = {}
        indexConfig.titleKey = 'core.common.title'

        $document = [{}]
        
        target = new TitleService($document, $translate, indexConfig)
    })

    it('should initialize', () => {
        $translate.should.have.been.calledWith(indexConfig.titleKey)
        target.defaultTitle.should.equal(title)
        $document[0].title.should.equal(title)
    })

    it('should support setting/resetting page title', () => {
        target.setTitle('boop')

        $document[0].title.should.equal('beep - boop')

        target.resetTitle()

        $document[0].title.should.equal(title)
    })
})
