//helper utils for testing
const _ = require('lodash')
const chai = require('chai')
const sinon = require('sinon')
const sinonChai = require('sinon-chai')
const chaiAsPromised = require('chai-as-promised')
const moment = require('moment')
const Bluebird = require('bluebird')

//make globals for easy testing
global._ = _
global.should = chai.should()
global.chai = chai
global.sinon = sinon
global.moment = moment
global.Promise = Bluebird

//settings/plugins
chai.use(sinonChai)
chai.use(chaiAsPromised)
require('sinon-as-promised')(Bluebird)

//fixes for webpack requires
const hook = require('node-hook')
const exportFilename = (source, filename) => `module.exports = '${filename}'`
hook.hook('.html', exportFilename)
hook.hook('.scss', exportFilename)
hook.hook('.css', exportFilename)
hook.hook('.png', exportFilename)
hook.hook('.svg', exportFilename)
hook.hook('.gif', exportFilename)
hook.hook('.jpg', exportFilename)
