describe('UserList', function() {
    let component
    let ctrl
    let users
    let currentUser
    let entityChips
    let roles
    let $state
    let $stateParams

    beforeEach(function() {
        users = [{id: 42}]
        users.responseDescription = {
            totalHits: 1
        }

        currentUser = {}
        currentUser.hasPermission = sinon.stub()
        entityChips = {}
        roles = [
            {name: 'a', id: 123},
            {name: 'b', id: 456}
        ]

        $state = {}
        $state.go = sinon.stub()

        _.set($state, '$current.locals.globals', {
            currentUser, users, entityChips, roles
        })

        $stateParams = {}
        $stateParams.view = ''

        component = require('../../../main/user/components/UserList')
        ctrl = new component.controller($state, $stateParams)
        ctrl.$onInit()
    })

    it('should initialize ', function() {
        ctrl.users.should.equal(users)
        ctrl.entityChips.should.equal(entityChips)
        ctrl.staticResults.should.deep.equal([{
            icon: 'people_outline',
            key: 123,
            keywords: 'role permission',
            name: 'a',
            param: 'role',
            type: 'static'
        }, {
            icon: 'people_outline',
            key: 456,
            keywords: 'role permission',
            name: 'b',
            param: 'role',
            type: 'static'
        }])
    })
})
